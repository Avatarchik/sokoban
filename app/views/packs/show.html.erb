<%= javascript_include_tag 'packs/show' %>

<div id="menu-levels">
  <ul id="packs">
    <li title="<%= @pack.name %>"><%= @pack.name %></li>
  </ul>
  
  <ul id="levels" class="levels">
  
    <% won_levels_ids = @pack.won_levels_ids(current_user) %>  
    <% @pack.levels.each_with_index do |level, index| %>
      <% selected = (@selected_level_name == level.name ? 'class="is-selected"' : '') %>
      <li <%= selected.html_safe %>>
        <% if won_levels_ids.include?(level.id) %>
          <span class="star icon-star"></span>
        <% else %>
          <span class="star icon-star-empty"></span>
        <% end %>
        <span class="level-index" title="<%= level.name %>"><%= index+1 %></span>
        <span class="level-id" title="<%= level.id %>"></span>
      </li>
    <% end %>
    
  </ul>
</div>

<%= render 'show_webgl_canvas' %>
<%= render 'show_raphael_canvas' %>
<%= render 'show_deadlock_message'%>

<canvas id="webgl" width="730" height="470">
  Sorry, your browser doesn't support the &lt;canvas/&gt; tag. Please come back with a newer
  browser.
</canvas>

<div id="raphael">
</div>

<div id="deadlock">
  <div id="deadlock-message">
    A deadlock has been found
  </div>
  <div id="deadlock-press-d">
    <span>Press <%= image_tag "key_d.png" %> to cancel the last move</span>
  </div>
</div>

<%= render 'packs/current_score' %>

<div style="clear:both"></div>

<div id="scores">
  <%# render @scores %>
</div>
